(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{328:function(t,s,a){"use strict";a.r(s);var n=a(14),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"tsæŠ½å–ç»„ä»¶æè¿°"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tsæŠ½å–ç»„ä»¶æè¿°"}},[t._v("#")]),t._v(" TSæŠ½å–ç»„ä»¶æè¿°")]),t._v(" "),s("h2",{attrs:{id:"èƒŒæ™¯"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#èƒŒæ™¯"}},[t._v("#")]),t._v(" èƒŒæ™¯")]),t._v(" "),s("p",[t._v("ä½ä»£ç å…¥æ–™éƒ¨åˆ†ï¼Œç©çš„"),s("a",{attrs:{href:"https://www.yuque.com/lce/doc/yhgcqb",target:"_blank",rel:"noopener noreferrer"}},[t._v("èŠ±æ ·"),s("OutboundLink")],1),t._v("å¾ˆå¤šï¼Œæ‰‹åŠ¨ç¼–å†™ä½ä»£ç ç»„ä»¶æè¿°ï¼Œæˆ–è€…é€šè¿‡ ReactProps è¯­æ³•è¯†åˆ«ï¼Œæˆ–è€…é€šè¿‡ Typescript æ³¨é‡Šè¯†åˆ«ã€‚å…¶ä¸­ï¼Œé€šè¿‡ Typescript è¯†åˆ«çš„éƒ¨åˆ†åˆ™æ˜¯åŸºäº "),s("a",{attrs:{href:"https://github.com/styleguidist/react-docgen-typescript",target:"_blank",rel:"noopener noreferrer"}},[t._v("react-docgen-typescript"),s("OutboundLink")],1),t._v(" (ä»¥ä¸‹ç®€ç§° RDT )æ¥å®ç°çš„ã€‚å¦å¤–ï¼Œdumi çš„"),s("a",{attrs:{href:"https://d.umijs.org/zh-CN/guide/advanced#%E7%BB%84%E4%BB%B6-api-%E8%87%AA%E5%8A%A8%E7%94%9F%E6%88%90",target:"_blank",rel:"noopener noreferrer"}},[t._v("æ–‡æ¡£ç”Ÿæˆ"),s("OutboundLink")],1),t._v("å®é™…ä¸Šä¹Ÿæ˜¯é€šè¿‡ RDT æ¥å®ç°çš„ï¼ŒåŒ…æ‹¬ "),s("a",{attrs:{href:"https://github.com/doczjs/docz/tree/main/core",target:"_blank",rel:"noopener noreferrer"}},[t._v("docz"),s("OutboundLink")],1),t._v(" ï¼ˆç°åœ¨çš„è¿˜æœ‰å¾ˆå¤šå…¶ä»–çŸ¥åæˆ–ä¸çŸ¥åçš„è¶³ ts æ‰«æå¤šæ˜¯åŸºäº RDTï¼‰ã€‚\nè€Œè¿™ä¸ª RDT å®é™…ä¸Šå¹¶æ²¡æœ‰é¢„æƒ³ä¸­çš„é‚£ä¹ˆå¼ºå¤§ï¼Œåªæ˜¯æœ‰é™çš„è¯†åˆ«äº†ä¸€éƒ¨åˆ† ast èŒƒå¼ã€‚æˆ‘åœ¨å®é™…ä½¿ç”¨è¿™ä¸ªåº“çš„è¿‡ç¨‹ä¸­è¸©äº†ä¸å°‘å®ƒçš„å‘ã€‚å®ƒçš„é—®é¢˜åŒ…æ‹¬ä½†ä¸é™äºï¼š")]),t._v(" "),s("ol",[s("li",[t._v("ä¸æ”¯æŒæ·±å±‚çº§çš„ç±»å‹å£°æ˜ "),s("a",{attrs:{href:"https://github.com/styleguidist/react-docgen-typescript/issues/202",target:"_blank",rel:"noopener noreferrer"}},[t._v("issue202"),s("OutboundLink")],1)]),t._v(" "),s("li",[t._v("ä¸æ”¯æŒç»„ä»¶ä»¥å¤–çš„ ts æ–‡æ¡£ç”Ÿæˆ "),s("a",{attrs:{href:"https://github.com/styleguidist/react-docgen-typescript/issues/434",target:"_blank",rel:"noopener noreferrer"}},[t._v("issue434"),s("OutboundLink")],1)]),t._v(" "),s("li",[t._v("ä¸æ”¯æŒä¼ å…¥æºç ç›´æ¥åˆ†æ ts å£°æ˜ï¼Œåªèƒ½ç›´æ¥æ‰«æç¡¬ç›˜æ–‡ä»¶ "),s("a",{attrs:{href:"https://github.com/styleguidist/react-docgen-typescript/issues/439",target:"_blank",rel:"noopener noreferrer"}},[t._v("issue439"),s("OutboundLink")],1)])]),t._v(" "),s("p",[t._v("è¿™ä¸‰ç‚¹å¯¹äºéœ€è¦æé«˜ç¼–è¯‘æ€§èƒ½ã€æ’ä»¶ä½¿ç”¨èŒƒå›´éƒ½æ˜¯å¾ˆå¤§çš„é—®é¢˜ã€‚ä¸è¿‡å®ƒçš„ä»£ç ä¹Ÿéå¸¸å€¼å¾—å‚è€ƒï¼Œæœ¬æ–‡å°±æ˜¯åœ¨é˜…è¯»å…¶æºç è¿‡ç¨‹ä¸­çš„ä¸€äº›åˆ†æå’Œæ”¶è·ã€‚")]),t._v(" "),s("h2",{attrs:{id:"ä»£ç åˆ†æ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä»£ç åˆ†æ"}},[t._v("#")]),t._v(" ä»£ç åˆ†æ")]),t._v(" "),s("p",[t._v("ç®€å•æµç¨‹å¦‚ä¸‹\n"),s("img",{attrs:{src:"/yuque/0/2022/jpeg/139763/1656056355140-c730a9b5-3f44-413b-bd8a-c37bbac24348.jpeg",alt:""}}),t._v("\nç”¨åˆ°äº†å‡ ä¸ªå…³é”® ts compiler apiã€‚ts compiler çš„ api å¹¶æ²¡æœ‰å…¬å¼€æ–‡æ¡£ï¼Œä»¥ä¸‹åªæ˜¯æ ¹æ® RDT çš„ä»£ç å®é™…æƒ…å†µæ¨æµ‹çš„å«ä¹‰ï¼š")]),t._v(" "),s("ol",[s("li",[t._v("getExportsOfModule: è·å– sourceFile çš„å¯¼å‡ºæ¨¡å—")]),t._v(" "),s("li",[t._v("getAliasedSymbol: è·å–å®é™…å®šä¹‰çš„ç±»å‹ï¼Œå¿½ç•¥ä¸­é—´çš„å¼•ç”¨/èµ‹å€¼å…³ç³» (Reference/PropertiesAssign)")]),t._v(" "),s("li",[t._v("type.getCallSignatures()  å‡½æ•°å¼ç»„ä»¶é€šè¿‡è¿™ä¸ª api è·å–åˆ°è°ƒç”¨å‡½æ•°ç­¾å")]),t._v(" "),s("li",[t._v("sig.getParameters();  é€šè¿‡ç­¾åè·å–å‚æ•°ç±»å‹")]),t._v(" "),s("li",[t._v("type.getConstructSignatures();  è·å– (React) Class çš„æ„é€ ç±»å‹ç­¾å")]),t._v(" "),s("li",[t._v("sig.getReturnType(); é€šè¿‡æ„é€ ç±»å‹ç­¾åè·å–åˆ°å®ä½“ç±»å‹")]),t._v(" "),s("li",[t._v("instanceType.getProperty('props');  é€šè¿‡å®ä½“ç±»å‹è·å–å®ƒçš„ props å±æ€§çš„ç±»å‹")]),t._v(" "),s("li",[t._v("checker.getTypeOfSymbolAtLocation()ï¼› ä½¿ç”¨ checker è·å– Props çš„å®é™…ç±»å‹")]),t._v(" "),s("li",[t._v("symbol.getApparentProperties;  è·å– symbol çš„æ˜¾æ€§ç±»å‹")]),t._v(" "),s("li",[t._v("symbol.isUnionOrIntersectionï¼›åˆ¤æ–­ç±»å‹æ˜¯å¦æ˜¯ è”åˆ ç±»å‹")]),t._v(" "),s("li",[t._v("checker.getAllPossiblePropertiesOfTypes;  è·å–å…¨éƒ¨å±æ€§")]),t._v(" "),s("li",[t._v("type.getConstraint   è·å–æ³›å‹ç±»å‹")])]),t._v(" "),s("p",[t._v("é€šè¿‡è¿™äº›å…³é”® api  åŠæµç¨‹å›¾ï¼Œå¤§æ¦‚èƒ½äº†è§£ RDT çš„å·¥ä½œåŸç†äº†ï¼š")]),t._v(" "),s("ol",[s("li",[t._v("å°†æ–‡ä»¶è·¯å¾„ä¼ é€’ç»™ ts.createPropgramï¼Œå¾—åˆ°å¯¹åº”çš„ checker / program")]),t._v(" "),s("li",[t._v("è·å– sourceFile çš„æ‰€æœ‰å¯¼å‡ºï¼Œåˆ¤æ–­å¯¼å‡ºç±»å‹æ˜¯å¦æ˜¯ FC / ReactClass ç»„ä»¶ï¼Œè¿™é‡Œæœ‰ä¸ªç™½åå•ç±»å‹ç”¨äºç¡®å®šæ˜¯ä¸æ˜¯ React ç»„ä»¶ï¼Œå†…ç½®äº† 'Stateless', 'StyledComponentClass', 'StyledComponent', 'FunctionComponent', 'StatelessComponent', 'ForwardRefExoticComponent' è¿™äº›ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å‚æ•°åœ¨å¤–éƒ¨ä¼ è¿›æ¥")]),t._v(" "),s("li",[t._v("æ ¹æ®ç»„ä»¶ç±»å‹ï¼Œå°è¯•ä»å‡½æ•°ï¿½ï¿½ï¿½å‚æˆ–è€… Class å®ä½“ç±»å‹çš„ propsï¼Œå¾—åˆ° props çš„ç±»å‹ç¬¦å·")]),t._v(" "),s("li",[t._v("è·å– props ç¬¦å·çš„ç±»å‹ï¼Œå…ˆæ’é™¤å®ƒæ˜¯æ³›å‹ / è”åˆç±»å‹")]),t._v(" "),s("li",[t._v("åˆ°è¿™æ­¥å·²ç»ç¡®å®šæ­¤ç±»å‹ä¸€å®šæ˜¯ { a, b ,c  } è¿™æ ·çš„ç»“æ„")]),t._v(" "),s("li",[t._v("éå†ç¬¬ä¸€å±‚å±æ€§çš„ç±»å‹")])]),t._v(" "),s("p",[t._v("ä»ä»¥ä¸Šæµç¨‹ï¼Œå¯ä»¥å¾—åˆ°ä¸¤ä¸ªé‡è¦ä¿¡æ¯ï¼š")]),t._v(" "),s("ol",[s("li",[t._v("åªä¼šåœ¨æ–‡ä»¶é‡Œæ‰¾åˆ°ç‰¹å®šèŒƒå¼çš„ç»„ä»¶ã€‚å¦‚æœæ˜¯ä¸€äº›é«˜é˜¶ç»„ä»¶æˆ–è€…å®ƒæ— æ³•åˆ¤å®šæ˜¯ä¸æ˜¯ React ç»„ä»¶çš„ï¼Œå®ƒä¼šç›´æ¥å¿½ç•¥ï¼›æ‰€ä»¥è¿™ä¸ª issue æçš„å®ƒä»æ ¹æœ¬ä¸Šå°±ä¸æ”¯æŒ "),s("a",{attrs:{href:"https://github.com/styleguidist/react-docgen-typescript/issues/434",target:"_blank",rel:"noopener noreferrer"}},[t._v("issue434"),s("OutboundLink")],1)]),t._v(" "),s("li",[t._v("props åªéå†ä¸€å±‚ï¼Œå¹¶ä¸”ç±»å‹ä¸èƒ½æ˜¯å­—é¢é‡ç±»å‹/è”åˆç±»å‹ï¼Œæ‰€ä»¥è¿™ä¸ª "),s("a",{attrs:{href:"https://github.com/styleguidist/react-docgen-typescript/issues/202",target:"_blank",rel:"noopener noreferrer"}},[t._v("issue202"),s("OutboundLink")],1),t._v(" ä¹Ÿä¸ä¼šåœ¨å®ƒçš„æ”¯æŒèŒƒå›´é‡Œ")])]),t._v(" "),s("h2",{attrs:{id:"éƒ¨åˆ†ä»£ç æˆªå›¾è¯´æ˜"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#éƒ¨åˆ†ä»£ç æˆªå›¾è¯´æ˜"}},[t._v("#")]),t._v(" éƒ¨åˆ†ä»£ç æˆªå›¾è¯´æ˜")]),t._v(" "),s("p",[t._v("æˆªå›¾è¿™æ®µä»£ç çš„åŠŸèƒ½ï¼šè¯†åˆ«ä»£ç å—å¦‚æœæ˜¯ä¸€ä¸ª memo(comp) ï¼Œæˆ–è€… forwardRef(comp) ï¼Œé¦–å…ˆåˆ¤æ–­è¡¨è¾¾å¼çš„ symbol åç§°æ˜¯å¦æ˜¯ memo/forwardï¼Œå…¶æ¬¡è·å– valueDeclarationï¼Œæ–­è¨€å®ƒæ˜¯ä¸€ä¸ª expression ï¼Œç”¨äººè¯è¯´ä¹Ÿå°±æ˜¯é¢„æœŸæ­¤ä»£ç å—æ˜¯ä¸ªå‡½æ•°è°ƒç”¨è¡¨è¾¾å¼ï¼ŒåŒæ—¶è°ƒç”¨çš„å‡½æ•°ååº”è¯¥æ˜¯ memo æˆ–è€… forwardã€‚æœ€åé€šè¿‡ å‡½æ•°(expressionï¼‰ çš„ ast å–å¾—å‡½æ•°è°ƒç”¨çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼ŒæŠŠå‚æ•°äº¤ç»™ checker.getSymbolAtLocationï¼Œè¿›è€Œå¾—åˆ°çœŸå®çš„ FC ç»„ä»¶ã€‚\n"),s("img",{attrs:{src:"/yuque/0/2022/png/139763/1656074581970-83ba6a15-4358-4823-b8de-85456546f1c4.png",alt:"image.png"}}),t._v("\nè¿™æ®µä»£ç åŠŸèƒ½æ¸…æ™°é€»è¾‘ç®€å•ï¼Œæ¯”è¾ƒæœ‰ä»£è¡¨æ€§ï¼Œäº‹å®ä¸Š react-docgen-typescript å¤§éƒ¨åˆ†ä»£ç é€»è¾‘éƒ½æ˜¯è¿™ä¸ªé£æ ¼ï¼šæ¨æµ‹ä¸€ä¸ªèŒƒå¼ -> å¦‚æœç¬¦åˆï¼Œå–å¾—éœ€è¦çš„ symbol -> symbol å†æ¨æµ‹æ˜¯å¦æ˜¯ç‰¹å®šèŒƒå¼ -> ä»¥æ­¤æ¨æ–­ä¸‹ä¸€ä¸ªèŒƒå¼ -> å¾—åˆ°æƒ³è¦çš„ç±»å‹å£°æ˜ç»“æ„ -> ä½¿ç”¨ SyntaxKind å¾—åˆ°å…·ä½“ç±»å‹ -> ç»„è£…æˆæè¿°ç»“æ„ã€‚\nè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæœ‰äº›å†™æ³•å¯èƒ½ä¼šå‡ºé—®é¢˜çš„åŸå› ï¼Œä¾‹å¦‚é¡¹ç›®é‡Œæ²¡æœ‰å®‰è£… reactï¼Œä½¿ç”¨äº† preactï¼Œæˆ–è€… tsconfig ä½¿ç”¨çš„ jsx mode æ˜¯ react-jsx æˆ–è€… jsx æ¨¡å¼ï¼Œæ‹¿åˆ°çš„ symbol  name å¯èƒ½å¹¶éä»£ç é‡Œæè¿°çš„åå­—ï¼Œå°±ä¼šæ¨ç®—å¤±è´¥ï¼Œä»è€Œæ— æ³•å¾—å‡ºæ­£ç¡®çš„è§£æç»“æœã€‚æˆ–è€…å†™äº†ä¸€äº›å¾ˆç»•çš„é€»è¾‘ï¼Œå¹¶ä¸åœ¨å®ƒè¿™ä¸ªèŒƒå¼é‡Œï¼Œä¾‹å¦‚  HOCï¼Œæˆ–è€…æ ¹æœ¬æ²¡æœ‰å£°æ˜æ˜¯ä¸ª FCï¼Œä¹Ÿå¾—ä¸åˆ°æ­£ç¡®è§£æç»“æœã€‚")]),t._v(" "),s("h2",{attrs:{id:"compiler-host"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#compiler-host"}},[t._v("#")]),t._v(" compiler host")]),t._v(" "),s("p",[t._v("ts.createProgram çš„ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯ compiler hostï¼Œè´Ÿè´£ ts ç¼–è¯‘å™¨çš„ IO é€»è¾‘ï¼Œä¹Ÿå°±æ˜¯è¯´é™¤äº†è¿™ä¸ª Host ä»¥å¤–ï¼Œts çš„æ ¸å¿ƒç¨‹åºéƒ½åªåšè¯­æ³•åˆ†æï¼Œå¹¶ä¸å¼ºä¾èµ–äºæ–‡ä»¶ç³»ç»Ÿï¼Œæ–‡ä»¶ IO ã€é¢å¤–åº“æ–‡ä»¶è¯»å–éƒ½äº¤ç”± compiler host æ¥å®ç°ã€‚åŸºäºè¿™ä¸ªèƒ½åŠ›ï¼Œå¯ä»¥ä¸º ts compiler åœ¨æµè§ˆå™¨ç¯å¢ƒè¿è¡Œæä¾›äº†åŸºç¡€ï¼Œäº‹å®ä¸Š "),s("a",{attrs:{href:"https://ts-ast-viewer.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://ts-ast-viewer.com/"),s("OutboundLink")],1),t._v(" ç­‰ç«™ç‚¹ä¹Ÿéƒ½æ˜¯åŸºäºè¿™ä¸€èƒ½åŠ›çš„ã€‚è€Œæˆ‘ä»¬å¹³æ—¶ç”¨åˆ°è¿™ä¸€å·¥å…·ï¼Œå…¶å®æ›´å¤šæ˜¯åœ¨ webpack-loader ç¯å¢ƒï¼Œæ„é€ å†…å­˜æ–‡ä»¶ç³»ç»Ÿå®ç° sourcecode-ast çš„è½¬åŒ–ã€‚å¯æƒœçš„æ˜¯ï¼Œreact-docgen-typescript å¹¶æ²¡æœ‰å®ç°è¿™ä¸€èƒ½åŠ›ã€‚\nä¸ºä»€ä¹ˆéœ€è¦ compiler host ?  å¸¸è§„ç†è§£åº”è¯¥å°±æ˜¯å¯¹ source code åš ast åˆ†æå°±å¥½äº†ï¼Œé¡¶å¤šå°±è¯»ä¸ª tsconfig.jsonï¼Œé‚£éœ€è¦ä¸€ä¸ªè·Ÿæ–‡ä»¶ç³»ç»Ÿæœ‰å…³çš„ host åšä»€ä¹ˆï¼Ÿå…¶å®ä»é‡Œé¢çš„ä¸€ä¸ª api å°±çœ‹å¯ä»¥çœ‹å‡ºæ¥ï¼š"),s("code",[t._v("getTypeOfSymbolAtLocation")]),t._v(".\nå½“æœ‰ compiler host çš„æ—¶å€™ï¼Œå¦‚æœç¨‹åºä¸­é‡åˆ°  "),s("code",[t._v("const Comp: React.FC")]),t._v("ï¼Œä¼šçœ‹åˆ°ï¼š\n"),s("img",{attrs:{src:"/yuque/0/2022/png/139763/1656214707975-71993509-294e-4a75-bf70-8b9bd9037dcf.png",alt:"image.png"}}),t._v("\nå®é™…ä¸Šå°±æ˜¯é€šè¿‡ host çš„ getSourceFile è¿›ä¸€æ­¥è¯»å–åˆ°äº† @types/react/index.d.ts å®é™…å£°æ˜çš„ä½ç½®ï¼Œè¿™é‡Œè‡ªç„¶ä¹Ÿå°±æ¶‰åŠåˆ°äº†æ–‡ä»¶ç³»ç»Ÿã€‚")]),t._v(" "),s("p",[t._v("åŸºäºè¿™ä¸ª Host ï¼Œæˆ‘å¯ä»¥å†™ä¸ªç®€å•çš„ wrapï¼Œè®© ts compiler host çš„è¯»å†™æ–‡ä»¶åšäº†æ¥å£çº§çš„ç¼“å­˜ï¼Œè®© ts çš„ IO æ›´é«˜æ•ˆï¼š")]),t._v(" "),s("div",{staticClass:"language-typescript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-typescript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å‚æ•° hash åŒ–")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("hashCode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" hash "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" chr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" hash"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    chr   "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("charCodeAt")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    hash  "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("hash "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" hash"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" chr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    hash "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Convert to 32bit integer")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" hash"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/** ç›¸åŒçš„å‚æ•°ç›´æ¥è¿”å›ä¸Šæ¬¡çš„è¯·æ±‚å€¼ */")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("cacheFuncByParams")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" k"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" cached "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    process"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("log "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("k"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" paramHash "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("hashCode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("map")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("a "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" a"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("stringify")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("a"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("cached"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("paramHash"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      cached"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("paramHash"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fn")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" cached"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("paramHash"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" compilerHost "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("getSourceFile")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" fileName "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getFile")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fileName"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?.")]),t._v("sourceFile"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("getDefaultLibFileName")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" opts "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'typescript'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("../")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("ts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getDefaultLibFileName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("opts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("writeFile")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* pass */")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("getCurrentDirectory")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("getDirectories")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("fileExists")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" filename "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" fs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("existsSync")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("filename"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("readFile")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" fileName "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getFile")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fileName"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("code"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("getCanonicalFileName")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" fileName "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sys"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("useCaseSensitiveFileNames "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" fileName "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" fileName"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toLowerCase")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("useCaseSensitiveFileNames")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" ts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sys"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("useCaseSensitiveFileNames"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("getNewLine")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" ts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sys"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("newLine"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("getEnvironmentVariable")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nObject"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("keys")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("compilerHost"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("forEach")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("k"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),t._v(" compilerHost"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("k"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'function'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    compilerHost"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("k"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cacheFuncByParams")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("compilerHost"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("k"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" k"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä¹‹ååœ¨æ‰«æ ts é¢„å‘æ ‘æ—¶ï¼Œå°±å¯ä»¥ç›´æ¥è¿™æ ·ä½¿ç”¨, å®ç°åº“æ–‡ä»¶ä¸ç”¨äºŒæ¬¡è¯»å–")]),t._v("\nts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createProgram")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("files"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" options"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" compilerHost"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h2",{attrs:{id:"ğŸ‚ğŸºçš„åœ°æ–¹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ‚ğŸºçš„åœ°æ–¹"}},[t._v("#")]),t._v(" ğŸ‚ğŸºçš„åœ°æ–¹")]),t._v(" "),s("p",[t._v("typescript å®˜ç½‘ compiler æ˜¯å‡ ä¹æ²¡æœ‰æ–‡æ¡£çš„ï¼Œæœå¯»äº†ç½‘ä¸Šçš„ï¼Œé™¤äº†å®˜ç½‘çš„ä¸€ä¸ª "),s("a",{attrs:{href:"https://github.com/Microsoft/TypeScript/wiki/Using-the-Compiler-API#a-minimal-compiler",target:"_blank",rel:"noopener noreferrer"}},[t._v("wiki"),s("OutboundLink")],1),t._v(" , è¿˜æœ‰ä¸€ä¸ªæ°‘é—´å†™çš„"),s("a",{attrs:{href:"https://jkchao.github.io/typescript-book-chinese/compiler/program.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("ç¼–è¾‘å™¨æ–‡æ¡£"),s("OutboundLink")],1),t._v(" å°±å†æ‰¾ä¸åˆ°å…¶ä»–çš„äº†ã€‚å‰©ä¸‹çš„éƒ½æ˜¯ä¸€äº› lowå¾—ä¸è¡Œçš„"),s("a",{attrs:{href:"https://juejin.cn/post/6844904177286512653",target:"_blank",rel:"noopener noreferrer"}},[t._v("åˆçº§æ–‡æ¡£"),s("OutboundLink")],1),t._v("ï¼Œæˆ–è€…æ˜¯ä»å®˜æ–¹ wiki æ‹·è´è¿‡æ¥çš„"),s("a",{attrs:{href:"https://learning-notes.mistermicheels.com/javascript/typescript/compiler-api/",target:"_blank",rel:"noopener noreferrer"}},[t._v("åªè¨€ç‰‡è¯­"),s("OutboundLink")],1),t._v("ã€‚åƒ react-docgen-typescript ä½¿ç”¨å¾—è¿™ä¹ˆæ·±çš„ api ï¼ŒçœŸä¸çŸ¥é“æ˜¯æ€ä¹ˆåšåˆ°çš„ã€‚ä¸è¿‡é€šè¿‡è¿™äº›åˆ†æï¼Œçœ‹èµ·æ¥ ts-compiler api æ›´å¤šçš„ä½¿ç”¨åœºæ™¯å…¶å®æ˜¯ ts è½¬ js æ„å»ºã€IDE çš„ LSP ï¼Œè€Œä¸æ˜¯ç”¨æ¥åšä¸€èˆ¬çš„ä»£ç æå–ã€‚\nä»¥å¾€æˆ‘å†™è¿‡ä¸€ä¸ª "),s("a",{attrs:{href:"https://github.com/javaxiu/api-loader/",target:"_blank",rel:"noopener noreferrer"}},[t._v("api-loader "),s("OutboundLink")],1),t._v(", ä¹Ÿæ˜¯åŸºäº ast å°† typescript ç¿»è¯‘æˆç±»ä¼¼ json schema å’Œ ajax è¯·æ±‚ä»£ç çš„å·¥å…·ï¼Œä½†æ˜¯ä¹Ÿéƒ½æ˜¯åŸºäº "),s("a",{attrs:{href:"https://ts-ast-viewer.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://ts-ast-viewer.com/"),s("OutboundLink")],1),t._v(" ï¼Œæ ¹æ® ast ä¸€å±‚å±‚å†™ node-walker æ¥æ¨æµ‹ä¿¡æ¯ç¿»è¯‘ä»£ç çš„ï¼Œå¹¶æ²¡æœ‰ RDT è¿™ä¹ˆé«˜é˜¶çš„ä½¿ç”¨ compiler  api ï¼Œå¾ˆå€¼å¾—å­¦ä¹ ã€‚ä¸è¿‡ api-loader ä¹Ÿä¸åˆé€‚å¤§é‡ç”¨ ts compiler api åƒ react-docgen-typescript ä¸€æ ·å»ç”¨èŒƒå¼æ¨æ–­æ¥å®ç°ï¼Œå› ä¸º api-loader çš„æ€è·¯æ›´å¤šæ˜¯åŸåœ°ç¿»è¯‘ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥è¯•ç”¨ä¸€ä¸‹ api-loader ã€‚\nreact-docgen-typescript ä¸æ”¯æŒçš„é‚£äº› feature ï¼Œæˆ‘æ­£åœ¨è€ƒè™‘è‡ªå·±æ¥å®ç°ä¸€ä¸ªï¼Œä½†æ˜¯ä¹Ÿæ­£å¦‚ react-docgen-typescript è¿™äº›é™åˆ¶å¹¶ä¸æ˜¯å› ä¸ºå®ƒçš„è®¾è®¡ä¸å¤Ÿé€šç”¨ï¼Œè€Œæ˜¯ ts-ast æœ¬èº«å°±å…·å¤‡å¾ˆå¤šçµæ´»æ€§ï¼Œè€Œè§£æç›®æ ‡åˆæ˜¯ä¸ªç¡®å®šæ€§çš„ï¼Œåªèƒ½æšä¸¾ä¸€å®šé‡çš„èŒƒå¼æ¥æ”¯æŒã€‚ä½†æ˜¯æˆ‘è‡³å°‘ä¼šè§£å†³è¿™ä¸¤ä¸ªé—®é¢˜ï¼š")]),t._v(" "),s("ol",[s("li",[t._v("ä¸æ”¯æŒæ·±å±‚åµŒå¥—çš„ç»“æ„")]),t._v(" "),s("li",[t._v("å¼ºä¾èµ– file-system ï¼Œå¯¼è‡´æ— æ³•åšæˆ webpack loader ç­‰ JIT å·¥å…·")])]),t._v(" "),s("h2",{attrs:{id:"æœ‰è¶£çš„æ•ˆæœ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æœ‰è¶£çš„æ•ˆæœ"}},[t._v("#")]),t._v(" æœ‰è¶£çš„æ•ˆæœ")]),t._v(" "),s("p",[t._v("vscode çš„ typescript ç±»å‹è¯†åˆ«æµç¨‹å¤§è‡´æ˜¯  ts ast -> ts symbol -> ts-lsp -> vscode ç•Œé¢æç¤ºã€‚ä¸‹é¢è¿™ç§å¤æ‚ç»“æ„ï¼šæ³›å‹ + åˆå¹¶ç±»å‹ + å¾ªç¯(Pick æ˜¯åŸºäº in è¯­æ³•ï¼‰+ ç±»å‹æ¨æ–­ï¼Œvscode éƒ½å¯ä»¥ç»™å‡ºæ­£ç¡®çš„ç±»å‹æç¤ºï¼š\n"),s("img",{attrs:{src:"/yuque/0/2022/png/139763/1661829054014-e3ec63c0-9789-4685-92d6-38cc73758240.png",alt:"image.png"}}),t._v("\nè¿™ä¸ªæ•ˆæœçš„æœ¬è´¨åŸç†æ˜¯æ¯ä¸€ä¸ªç±»å‹éƒ½æ˜¯ä¸€ä¸ª ts é‡Œé¢çš„ Symbol ï¼ŒSymbol åœ¨ ts çš„æ¦‚å¿µé‡Œï¼Œä¸æ–‡ä»¶è·¯å¾„ã€ç±»å‹åç§°æ— å…³ï¼Œå°±æ˜¯ä¸€ä¸ªé€šè¿‡ ts program è¯­æ³•è§£æå¾—åˆ°çš„ä¸€ä¸ªç»„åˆæ¨¡å¼çš„ç±»å‹ç¬¦å·ï¼Œå®ƒå¯ä»¥æ˜¯ä¸€ä¸ª type / interface /class / ç”šè‡³æ˜¯ä¸€ä¸ªåŒ¿åç±»å‹ã€infer ç­‰ã€‚Symbol èƒŒåæ˜¯å±‚å±‚æ–‡ä»¶æŸ¥æ‰¾ï¼Œåœ¨ä½¿ç”¨åˆ°ç‰¹å®šçš„ Symbol çš„æ—¶å€™ä¼šè°ƒç”¨æ–‡ä»¶ç³»ç»Ÿè¯»å–åˆ°å…¶çœŸå®ç±»å‹ï¼Œå¦‚å›¾çš„è¿™ç§ä¾‹å­ï¼Œå¦‚æœ Symbol æ˜¯ä¸€ä¸ª Object ç±»å‹ï¼Œåˆ™é€šè¿‡ç±»ä¼¼ "),s("code",[t._v("getApparentProperties")]),t._v("è¿™æ ·çš„æ–¹æ³•å¯ä»¥æŸ¥è¯¢åˆ°ç»è¿‡äº† extendsã€& ã€in ã€aliasã€typeof js ç±»å‹è½¬æ¢ã€infer ç±»å‹æ¨æ–­ ç­‰å„ç§éªšæ“ä½œæœ€ç»ˆåˆå¹¶å¾—åˆ°çš„ç±»å‹åˆ—è¡¨ã€‚å› æ­¤ vscode æ‰èƒ½è¯†åˆ«åˆ°è¿™ä¹ˆå¤æ‚çš„ç±»å‹ç»“æ„ã€‚è€Œæ ¹æ®è¿™ä¸ªåŸç†ï¼Œå®é™…ä¸Šæˆ‘ä»¬å®Œå…¨å¯ä»¥å¤ç”¨å…¶ ast è§£æå™¨ï¼ŒæŠŠä¸Šé¢è¿™ä¸ªå¤æ‚çš„ç±»å‹ç»™è§£æå‡ºæ¥ï¼Œå¾—åˆ°å¦‚ä¸‹ç»“æœï¼š\n"),s("img",{attrs:{src:"/yuque/0/2022/png/139763/1661829435763-03335a4e-b673-4ccf-b537-9f1af1319a08.png",alt:"image.png"}}),t._v("\nè¿™é‡Œä¸ºäº†æ–¹ä¾¿æˆªå›¾å±•ç¤ºï¼ŒæŠŠå‡ ä¸ªç±»å‹éƒ½å†™åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œï¼ŒæŠŠå®ƒä»¬æ‹†å¼€æ”¾åœ¨ä¸åŒçš„æ–‡ä»¶ä¹Ÿæ˜¯ä¸€æ ·çš„è§£ææ•ˆæœã€‚å½“ç„¶ï¼Œè¿™ä¸ªæ•ˆæœä¸»è¦è¿˜æ˜¯åœ¨ react-docgen-typescript çš„åŸºç¡€ä¸Šï¼Œè¡¥å……äº†ä¸€äº›é€’å½’æŸ¥æ‰¾çš„ä»£ç å®ç°çš„ã€‚å€Ÿæ­¤å¯ä»¥åšçš„äº‹æƒ…å¯ä»¥è¿œè¶…åŸºç¡€çš„ä»…é’ˆå¯¹å½“å‰æ–‡ä»¶çš„ä»£ç åš ast è§£æå¯ä»¥åšå¾—åˆ°çš„æ•ˆæœã€‚\nåƒæˆªå›¾ä¸­é€‰ä¸­çš„åŒºåŸŸï¼Œæ˜¯ç›®å‰æˆ‘å†™çš„é€’å½’è§£æå°šæœªå®Œå–„çš„åœ°æ–¹ï¼Œè¿™é‡Œåº”è¯¥å¯ä»¥ç»§ç»­æ ¹æ®è§£æ symbol èƒŒåçš„ç±»å‹ã€‚ts ä¸–ç•Œçš„ç±»å‹å®åœ¨å¤ªå¤æ‚ï¼Œæ—¥å¸¸çœ‹åˆ°çš„ union ã€inferã€interfaceã€literal ç­‰ï¼Œä»…ä»…åªæ˜¯æ°´é¢ä¹‹ä¸Šçš„å†°å±±ï¼Œè¦å…¨éƒ¨å¤„ç†å‡ºæ¥ä¸æ˜¯ä¸å¯ä»¥ï¼Œåªæ˜¯æˆæœ¬å¾ˆé«˜ï¼Œä¸”æ•ˆæœæš‚æ—¶ç”¨ä¸ç€")])])}),[],!1,null,null,null);s.default=e.exports}}]);